{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/queue/index.ts"],"names":[],"mappings":"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","sourcesContent":["import type { CommonOptions, OracleData, SwitchboardClient } from \"../index.js\";\nimport { getFieldsFromObject, ObjectParsingHelper } from \"../index.js\";\nimport { Oracle } from \"../oracle/index.js\";\n\nimport type { DynamicFieldInfo } from \"@mysten/sui/client\";\nimport type { Transaction } from \"@mysten/sui/transactions\";\nimport { fromHex, toBase58 } from \"@mysten/sui/utils\";\nimport { SUI_CLOCK_OBJECT_ID } from \"@mysten/sui/utils\";\n\nexport interface QueueInitParams extends CommonOptions {\n  queueKey: string;\n  authority: string;\n  name: string;\n  fee: number;\n  feeRecipient: string;\n  minAttestations: number;\n  oracleValidityLengthMs: number;\n  guardianQueueId?: string;\n  isGuardianQueue?: boolean;\n}\n\nexport interface QueueSetConfigsParams extends CommonOptions {\n  name: string;\n  fee: number;\n  feeRecipient: string;\n  minAttestations: number;\n  oracleValidityLengthMs: number;\n}\n\nexport interface QueueSetAuthorityParams extends CommonOptions {\n  newAuthority: string;\n}\n\nexport interface QueueOverrideOracleParams extends CommonOptions {\n  oracle: string;\n  secp256k1Key: string;\n  mrEnclave: string;\n  expirationTimeMs: number;\n}\n\nexport interface QueueSetFeeTypeParams extends CommonOptions {\n  feeType: string;\n}\n\nexport interface QueueData {\n  authority: string;\n  existingOracles: {\n    oracleId: string;\n    oracleKey: string;\n  }[];\n  fee: number;\n  feeRecipient: string;\n  feeTypes: {\n    type: string;\n    fields: Record<string, unknown>;\n  }[];\n  guardianQueueId: string;\n  id: string;\n  lastQueueOverrideMs: number;\n  minAttestations: number;\n  name: string;\n  oracleValidityLengthMs: number;\n  queueKey: string;\n}\n\nexport class Queue {\n  constructor(readonly client: SwitchboardClient, readonly address: string) {}\n\n  /**\n   * Create a new Queue\n   */\n  public static async initTx(\n    client: SwitchboardClient,\n    tx: Transaction,\n    options: QueueInitParams\n  ) {\n    const { switchboardAddress } = await client.fetchState(options);\n\n    if (options.isGuardianQueue) {\n      tx.moveCall({\n        target: `${switchboardAddress}::guardian_queue_init_action::run`,\n        arguments: [\n          tx.pure.vector(\"u8\", Array.from(fromHex(options.queueKey))),\n          tx.pure.address(options.authority),\n          tx.pure.string(options.name),\n          tx.pure.u64(options.fee),\n          tx.pure.address(options.feeRecipient),\n          tx.pure.u64(options.minAttestations),\n          tx.pure.u64(options.oracleValidityLengthMs),\n        ],\n      });\n    } else {\n      if (!options.guardianQueueId) {\n        throw new Error(\"guardianQueueId is required for non-guardian queues\");\n      }\n      tx.moveCall({\n        target: `${switchboardAddress}::oracle_queue_init_action::run`,\n        arguments: [\n          tx.pure.vector(\"u8\", Array.from(fromHex(options.queueKey))),\n          tx.pure.address(options.authority),\n          tx.pure.string(options.name),\n          tx.pure.u64(options.fee),\n          tx.pure.address(options.feeRecipient),\n          tx.pure.u64(options.minAttestations),\n          tx.pure.u64(options.oracleValidityLengthMs),\n          tx.object(options.guardianQueueId),\n        ],\n      });\n    }\n  }\n\n  /**\n   * Queue set configs tx\n   */\n  public async setConfigsTx(tx: Transaction, options: QueueSetConfigsParams) {\n    const { switchboardAddress } = await this.client.fetchState(options);\n\n    tx.moveCall({\n      target: `${switchboardAddress}::queue_set_configs_action::run`,\n      arguments: [\n        tx.object(this.address),\n        tx.pure.string(options.name),\n        tx.pure.u64(options.fee),\n        tx.pure.address(options.feeRecipient),\n        tx.pure.u64(options.minAttestations),\n        tx.pure.u64(options.oracleValidityLengthMs),\n      ],\n    });\n  }\n\n  /**\n   * Queue set authority tx\n   */\n  public async setAuthorityTx(\n    tx: Transaction,\n    options: QueueSetAuthorityParams\n  ) {\n    const { switchboardAddress } = await this.client.fetchState(options);\n\n    tx.moveCall({\n      target: `${switchboardAddress}::queue_set_authority_action::run`,\n      arguments: [\n        tx.object(this.address),\n        tx.pure.address(options.newAuthority),\n      ],\n    });\n  }\n\n  /**\n   * Queue override oracle tx\n   */\n  public async overrideOracleTx(\n    tx: Transaction,\n    options: QueueOverrideOracleParams\n  ) {\n    const { switchboardAddress } = await this.client.fetchState(options);\n    tx.moveCall({\n      target: `${switchboardAddress}::queue_override_oracle_action::run`,\n      arguments: [\n        tx.object(this.address),\n        tx.object(options.oracle),\n        tx.pure.vector(\"u8\", Array.from(fromHex(options.secp256k1Key))),\n        tx.pure.vector(\"u8\", Array.from(fromHex(options.mrEnclave))),\n        tx.pure.u64(options.expirationTimeMs),\n        tx.object(SUI_CLOCK_OBJECT_ID),\n      ],\n    });\n  }\n\n  /**\n   * Queue add fee type tx\n   */\n  public async addFeeTypeTx(tx: Transaction, options: QueueSetFeeTypeParams) {\n    const { switchboardAddress } = await this.client.fetchState(options);\n    tx.moveCall({\n      target: `${switchboardAddress}::queue_add_fee_type_action::run`,\n      arguments: [tx.object(this.address)],\n      typeArguments: [options.feeType],\n    });\n  }\n\n  /**\n   * Queue remove fee type tx\n   */\n  public async removeFeeTypeTx(\n    tx: Transaction,\n    options: QueueSetFeeTypeParams\n  ) {\n    const { switchboardAddress } = await this.client.fetchState(options);\n    tx.moveCall({\n      target: `${switchboardAddress}::queue_remove_fee_type_action::run`,\n      arguments: [tx.object(this.address)],\n      typeArguments: [options.feeType],\n    });\n  }\n\n  /**\n   * Get the queue data object\n   */\n  public async loadData(): Promise<QueueData> {\n    const rpcResponseData = await this.client.client\n      .getObject({\n        id: this.address,\n        options: {\n          showContent: true,\n          showType: true,\n        },\n      })\n      .then(getFieldsFromObject);\n\n    // Fetch the exisitng oracles\n    const existingOraclesResponse: any = rpcResponseData.existing_oracles;\n    const existingOraclesObjects: DynamicFieldInfo[] = [];\n    let existingOraclesDynamicFields =\n      await this.client.client.getDynamicFields({\n        parentId: existingOraclesResponse.fields.id.id,\n      });\n    existingOraclesObjects.push(...existingOraclesDynamicFields.data);\n    while (existingOraclesDynamicFields.hasNextPage) {\n      existingOraclesDynamicFields = await this.client.client.getDynamicFields({\n        parentId: existingOraclesDynamicFields.nextCursor,\n      });\n      existingOraclesObjects.push(...existingOraclesDynamicFields.data);\n    }\n\n    // fetch existing oracles objects\n    const realExistingOraclesContents =\n      await this.client.client.multiGetObjects({\n        ids: existingOraclesObjects.map((o) => {\n          return o.objectId;\n        }),\n        options: {\n          showContent: true,\n        },\n      });\n\n    // parse the existing oracles\n    const existingOracles = realExistingOraclesContents.map((o) => {\n      const fields: any = getFieldsFromObject(o);\n      return {\n        oracleId: ObjectParsingHelper.asString(fields.value.fields.oracle_id),\n        oracleKey: toBase58(\n          ObjectParsingHelper.asUint8Array(fields.value.fields.oracle_key)\n        ),\n      };\n    });\n\n    // build from the result\n    const data: QueueData = {\n      // get authority address\n      authority: ObjectParsingHelper.asString(rpcResponseData.authority),\n\n      // get existing oracles (TODO)\n      existingOracles: existingOracles,\n\n      // get fee number (though encoded as string)\n      fee: ObjectParsingHelper.asNumber(rpcResponseData.fee),\n\n      // fee recipient address\n      feeRecipient: ObjectParsingHelper.asString(rpcResponseData.fee_recipient),\n\n      // accepted fee coin types\n      feeTypes: ObjectParsingHelper.asArray(rpcResponseData.fee_types).map(\n        (ft: any) => ft.fields.name\n      ),\n\n      // guardian queue id\n      guardianQueueId: ObjectParsingHelper.asString(\n        rpcResponseData.guardian_queue_id\n      ),\n\n      // queue id\n      id: ObjectParsingHelper.asId(rpcResponseData.id),\n\n      // last queue override ms\n      lastQueueOverrideMs: ObjectParsingHelper.asNumber(\n        rpcResponseData.last_queue_override_ms\n      ),\n\n      // minimum attestations\n      minAttestations: ObjectParsingHelper.asNumber(\n        rpcResponseData.min_attestations\n      ),\n\n      // queue name\n      name: ObjectParsingHelper.asString(rpcResponseData.name),\n      oracleValidityLengthMs: ObjectParsingHelper.asNumber(\n        rpcResponseData.oracle_validity_length_ms\n      ),\n\n      // get source queue key\n      queueKey: toBase58(\n        ObjectParsingHelper.asUint8Array(\n          rpcResponseData.queue_key\n        ) as Uint8Array\n      ),\n    };\n\n    return data;\n  }\n\n  /**\n   * Load oracle data\n   */\n  async loadOracleData(): Promise<OracleData[]> {\n    const queueData = await this.loadData();\n    const oracleIds = queueData.existingOracles.map((o) => o.oracleId);\n    return Oracle.loadMany(this.client, oracleIds);\n  }\n}\n"]}