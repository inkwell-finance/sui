{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../src/state/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,wCAAuE;AAWvE;IACE,eAAqB,MAAyB,EAAW,OAAe;QAAnD,WAAM,GAAN,MAAM,CAAmB;QAAW,YAAO,GAAP,OAAO,CAAQ;IAAG,CAAC;IAE5E;;OAEG;IACU,wBAAQ,GAArB;;;;;4BACuB,qBAAM,IAAI,CAAC,MAAM,CAAC,MAAM;6BAC1C,SAAS,CAAC;4BACT,EAAE,EAAE,IAAI,CAAC,OAAO;4BAChB,OAAO,EAAE;gCACP,WAAW,EAAE,IAAI;gCACjB,QAAQ,EAAE,IAAI;6BACf;yBACF,CAAC;6BACD,IAAI,CAAC,8BAAmB,CAAC,EAAA;;wBARtB,YAAY,GAAG,SAQO;wBAE5B,+BAA+B;wBAC/B,sBAAO,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,EAAC;;;;KAC3C;IAEa,oBAAc,GAA5B,UAA6B,YAAiB;QAC5C,wBAAwB;QACxB,OAAO;YACL,aAAa,EAAE,8BAAmB,CAAC,QAAQ,CAAC,YAAY,CAAC,cAAc,CAAC;YACxE,EAAE,EAAE,8BAAmB,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC;YAC7C,iBAAiB,EAAE,8BAAmB,CAAC,QAAQ,CAC7C,YAAY,CAAC,oBAAoB,CAClC;YACD,WAAW,EAAE,8BAAmB,CAAC,QAAQ,CAAC,YAAY,CAAC,YAAY,CAAC;SACrE,CAAC;IACJ,CAAC;IAEmB,WAAK,GAAzB,UACE,MAAiB,EACjB,OAAe;;;;;4BAEM,qBAAM,MAAM;6BAC9B,SAAS,CAAC;4BACT,EAAE,EAAE,OAAO;4BACX,OAAO,EAAE;gCACP,WAAW,EAAE,IAAI;gCACjB,QAAQ,EAAE,IAAI;6BACf;yBACF,CAAC;6BACD,IAAI,CAAC,8BAAmB,CAAC,EAAA;;wBARtB,YAAY,GAAG,SAQO;wBAC5B,sBAAO,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,EAAC;;;;KAC3C;IACH,YAAC;AAAD,CAAC,AAhDD,IAgDC;AAhDY,sBAAK","sourcesContent":["import type { SwitchboardClient } from \"../index.js\";\nimport { getFieldsFromObject, ObjectParsingHelper } from \"../index.js\";\n\nimport type { SuiClient } from \"@mysten/sui/client\";\n\nexport interface StateData {\n  id: string;\n  guardianQueue: string;\n  oracleQueue: string;\n  onDemandPackageId: string;\n}\n\nexport class State {\n  constructor(readonly client: SwitchboardClient, readonly address: string) {}\n\n  /**\n   * Get the state data object\n   */\n  public async loadData(): Promise<StateData> {\n    const receivedData = await this.client.client\n      .getObject({\n        id: this.address,\n        options: {\n          showContent: true,\n          showType: true,\n        },\n      })\n      .then(getFieldsFromObject);\n\n    // return the data in camelCase\n    return State.parseStateData(receivedData);\n  }\n\n  public static parseStateData(receivedData: any): StateData {\n    // build from the result\n    return {\n      guardianQueue: ObjectParsingHelper.asString(receivedData.guardian_queue),\n      id: ObjectParsingHelper.asId(receivedData.id),\n      onDemandPackageId: ObjectParsingHelper.asString(\n        receivedData.on_demand_package_id\n      ),\n      oracleQueue: ObjectParsingHelper.asString(receivedData.oracle_queue),\n    };\n  }\n\n  public static async fetch(\n    client: SuiClient,\n    address: string\n  ): Promise<StateData> {\n    const receivedData = await client\n      .getObject({\n        id: address,\n        options: {\n          showContent: true,\n          showType: true,\n        },\n      })\n      .then(getFieldsFromObject);\n    return State.parseStateData(receivedData);\n  }\n}\n"]}